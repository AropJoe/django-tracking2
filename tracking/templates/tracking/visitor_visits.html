<!DOCTYPE html>
<html>
<head>
<title>{% firstof visit.user.get_full_name visit.user %} {{ visit.start_time|date:"Y-m-d H:i:s" }} - {{ visit.start_time|date:"Y-m-d H:i:s" }} Visit Overview - django-tracking2</title>
</head>
<body>
    <h1>{% firstof visit.user.get_full_name visit.user %} {{ visit.start_time|date:"Y-m-d H:i:s" }} - {{ visit.start_time|date:"Y-m-d H:i:s" }} Visit Overview - django-tracking2</h1>
    <div id="tracking-stats">
        <dl>
            <dt>Duration</dt>
            <dd>{{ visit.time_on_site }}</dt>
            <dt># of Page Views</dt>
            <dd>{{ pageviews|length }}</dt>
            <dt>IP</dt>
            <dd>{{ visit.ip_address }}</dt>
            <dt>User Agent</dt>
            <dd>{{ visit.user_agent }}</dt>
      </dl>
      <table>
        <caption>Views/Page</caption>
        <thead>
            <th>URL</th>
            <th># of views</th>
        </thead>
        <tbody>
        {% for url, views in pageview_stats.items %}
            <tr>
                <td><a href={% url 'tracking-page-detail' user_id=visit.user.pk page_url=url %}>{{ url }}</a></td>
                <td>{{ views }}</td>
            </tr>
        {% endfor %}
        </tbody>
      </table>
      
        <table>
            <caption>Page Views</caption>
            <thead>
                <th>Time</th>
                <th>URL</th>
            </thead>
            <tbody>
                {% for view in pageviews %}
                <tr>
                    <td>{{ view.view_time|date:"Y-m-d H:i:s" }}</td>
                    <td><a href={% url 'tracking-pageview-detail' user_id=visit.user.pk pageview_id=view.pk %}>{{ view.url }}</a></td>
                </tr>
                {% endfor %}
            </tbody>	    
        </table>
    </div>
</body>
</html>